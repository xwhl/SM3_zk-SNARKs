## SM3零知识证明电路
### 简介
- 通用零知识证明：基于电路可满足性，可对任意NP问题生成零知识证明。过程为**问题计算过程**->**加乘二元运算**->**R1CS**->**QAP/QSP**->**后端协议**。
- 背景与目的：零知识证明生成需要手动实现计算过程至加乘电路门的转换，目前尚未有关于SM3的对应实现。
### 详细设计（见NAS上我的毕设或专利）
- 分层结构：共四层，下层可由上层调用。
- SM3的压缩函数计算过程与加乘表达式及R1CS形式的转换。
### 项目代码
- 基于libsnark库，由C++编写，内置很多示例。
- 具体代码编写分为三步：
    - 电路模块构造函数：声明并初始化该子电路的所有输入输出和中间变量。
    - 约束生成函数：将我论文中A*B-C=0形式的电路形式用代码表述。
    - 证据计算：将该电路从输入开始进行计算，并将对应结果赋值给每个中间变量。
### 如何使用
  - python辅助脚本（字符串消息至16进制的转换、消息填充以及SM3值计算）
    - ```pip install gmssl```
    - 输入哈希原像，得到其填充后的16进制表示，以及对应SM3值```python3 $PROJECT_PATH/src/padding.py '哈希原型'```
  - 编译&&运行（src/main.cpp）
    - ```cd $PROJECT_PATH```
    - ```mkdir build && cd build```
    - ```cmake ..```
    - ```make```
    - ```cd src```
    - 输入padding.py生成的填充后的消息序列，生成对应零知识证明，并输入padding.py生成的SM3哈希值进行验证，输出1表示证明通过验证。```./main```
  - 其它使用方法，如生成prove/verification key进行证明和验证的方式可以参考github上关于libsnark的例程，搜索libsnark-tutorial, libsnark-sample等
